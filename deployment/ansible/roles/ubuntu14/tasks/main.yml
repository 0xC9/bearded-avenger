---
# tasks file for ubuntu-check
- name: "Check for 64-bit"
  fail: msg="Must be install 64-bit"
  when: is_64bit != "x86_64"
- name: "Check for Ubuntu"
  fail: msg="Must be Ubuntu"
  when: is_ubuntu != "Ubuntu"
- name: "Check for version 14.04"
  fail: msg="Must be version 14.04"
  when: is_ubuntu_version != "14.04"

- ufw: rule=allow port={{ item }} state=enabled
  with_items:
    - 22
    - 443
    - 5000
  tags: ufw

- name: Add apt HTTPS support
  apt: name=apt-transport-https state=present
- name: Update apt cache if needed.
  apt: update_cache=yes cache_valid_time=3600

- name: install deps
  apt:
    state: latest
    pkg: "{{ item }}"
  with_items:
    - build-essential
    - htop
    - git

- include: python27.yml